<div class="container p-2 text-center">
    <span *ngIf="getCurrentSizeDatasource === 0; else dashboard">
        <h1>No se encontraron registros de productos.</h1>
        <div class="text-center m-2">
            <button style="margin-right: 2rem;" 
                mat-button class="text-light bg-success"
                (click)="openSaveDialog( 'save' )">
                Agregar nuevo producto
            </button>
        </div>
    </span>
    <ng-template #dashboard>
        <h1>Administracion de productos</h1>
        <hr>
        <product-search (searchBox)="setSearchValue( $event )"/>
        
        <div class="row align-items-end">
            <div class="col text-start">
                <div class="mb-2">
                    <button
                        mat-button class="text-light bg-primary"
                        (click)="openAdminCategoryDialog()">
                        Administrar categorias
                    </button>
                </div>
                <div>
                    <button
                        mat-button class="text-light bg-success"
                        (click)="openSaveDialog( 'save' )">
                        + Agregar nuevo producto
                    </button>
                </div>
            </div>
            <div class="col text-end">
                <span><strong>Filtrar por</strong> </span>
                <product-filter-category  (eventCategory)="setCategoryName(  $event )" class="m-2"/>
                <product-filter-available (available)="setAvailable( $event )" />
            </div>
        </div>
        
        <table class="table table-striped">    
            <thead>
                <tr>
                    <th 
                        *ngFor="let col of columnsTable" 
                        scope="col">
                        {{ col }}
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of dataSource"
                scope="row">
                    <td style="width: 100px; "><img [src]="item.img |urlImage" [alt]="item.description +'image'" style="height: 80px;"></td>
                    <td>{{ item.id }}</td>
                    <td style="width: 25rem;">{{ item.description }}</td>
                    <td>$ {{ item.price }}</td>
                    <td><mat-icon>{{ item.available |stringBoolean}}</mat-icon></td>
                    <td>{{ item.category.name |uppercase}}</td>
                    <td>
                        <button class="m-2" style="background-color: orange;" mat-button (click)="openSaveDialog( 'update', item )"><i><mat-icon>edit</mat-icon></i></button>
                        <button class="m-2" style="background-color: yellow;" mat-button (click)="openConfirmDialog( 'disable', item )"><i><mat-icon>block</mat-icon></i></button>
                        <button class="m-2" style="background-color: red;" mat-button (click)="openConfirmDialog( 'delete', item )"><i><mat-icon>delete</mat-icon></i></button>
                    </td>
                </tr>
            </tbody>
        </table>

        <nav class="d-flex justify-content-center">
            <ul class="pagination pagination-sm">
                <li class="page-item pointer" [ngClass]="{ 'disabled': dataPage?.isFirst }">
                    <a class="page-link" (click)="onNavigate( dataPage?.pageable!.pageNumber )" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>

                <li 
                    *ngFor="let page of pages"
                    class="page-item pointer"
                    [ngClass]="{'active': (dataPage?.pageable!.pageNumber + 1) === page}"
                    (click)="onNavigate( page )"
                >
                    <a class="page-link">{{ page }}</a>
                </li>

                <li class="page-item pointer" [ngClass]="{ 'disabled': dataPage?.isLast }">
                <a class="page-link" (click)="onNavigate( dataPage?.pageable!.pageNumber + 2 )" aria-label="Next">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
        </nav>
        
    </ng-template>
</div>
   